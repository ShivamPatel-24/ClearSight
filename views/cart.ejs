<!DOCTYPE html>
<html>
    
<head>

    <title>Shopping Cart UI</title>
<%- include('partials/header') %>


    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,900" rel="stylesheet">
    <link rel="stylesheet" href="/css/cart-css.css">



</head>

<% function getTotalAmount(cartItems) { let total=0; let count=0; cartItems.forEach(function (item) { const
    amount=parseFloat(item.amount.slice(1)); const quantity=parseInt(item.count); total +=amount * quantity; count
    +=quantity; }); return `$${total.toFixed(2)}`; } const getTotalItems=(cartItems)=> {
    let totalCount = 0;
    cartItems.forEach((item) => {
    totalCount += item.count;
    });
    return totalCount;
    };
    %>
    
    <body>
        
       
        <%- include('partials/header') %>
        <button class="hamburger-btn" onclick="toggleOptions()" title="Accessibility Menu">
            <label>Accessibility menu â˜°</label>
          </button>
          
          <ul class="options-list hidden">
            <li>
              <button id="inc-font" onclick="increaseFontSizeCart()">Increase Font Size</button>
            </li>
            <li>
              <button id="dec-font" onclick="decreaseFontSizeCart()">Decrease Font Size</button>
            </li>
            <li>
                <button id="color-toggle" class="toggle-button" onclick="toggleBackgroundColor()">switch theme</button>
             

            </li>
            <li>
              <div class="brightness-slider-container">
                <label for="brightness-slider">Adjust Brightness:</label>
                <input type="range" min="50" max="200" value="125" class="brightness-slider" id="brightness-slider">
              </div>
            </li>
          </ul>
          <style>
            /* Default state of the button */
.toggle-button {
  background-color: #fff;
  color: #000;
  border: 1px solid #000;
  padding: 5px 10px;
  font-size: 16px;
}

/* State of the button when active */
.toggle-button.active {
  background-color: #000;
  color: #fff;
}

/* Hide the button focus outline */
.toggle-button:focus {
  outline: none;
}

          </style>
          <script>
            function toggleBackgroundColor() {
  var body = document.querySelector('body');
  var button = document.querySelector('.toggle-button');
  if (button.classList.contains('active')) {
    // Set background color to white
    body.style.backgroundColor = '#fff';
    button.classList.remove('active');
  } else {
    // Set background color to black
    body.style.backgroundColor = '#000';
    button.classList.add('active');
  }
}

          </script>
          <script src="/js/cart.js" type="text/javascript"></script>
          <script src="/js/accesibility-main.js" type="text/javascript"></script>
          <script src="/js/main.js" type="text/javascript"></script>
          
    
       
        <div class="CartContainer">
            
            <div class="Header">
                <h3 class="Heading"><label id="myLabel"class="changeable-font-size"> Shopping Cart</label></h3>
                <h5 class="Action">
                    <p class="changeable-font-size">Remove all</p></h5>
            </div>
          
            <% cartItems.forEach(item=> { %>
                <div class="Cart-Items">
                    <div class="image-box">
                        <img src="<%= item.image %>" style="height: 120px" />
                    </div>
                    <div class="about">
                        <br>
                        <p class="changeable-font-size"><h1 class="title"></p>
                            <%= item.title %>
                        </h1>
                        <br>
                        <h3 class="subtitle">
                            <%= item.subtitle %>
                        </h3>
                    </div>
                    <div class="counter">
                        <a href="/cart/decrement/<%= item.id %>">
                            <div class="btn">-</div>
                        </a>
                        <div class="count">
                            <%= item.count %>
                        </div>
                        <a href="/cart/increment/<%= item.id %>">
                            <div class="btn">+</div>
                        </a>
                    </div>
                    <div class="prices">
                        <br>
                        <div class="amount">
                            <%= item.amount %>
                           
                        </div>
                        <div class="save"><u> <p class="changeable-font-size">Save for later</p></u></div>
                        <div class="remove"><u><p class="changeable-font-size">Remove</p></u></div>
                    </div>
                </div>
                <% }); %>


                    <br>

                    <div class="checkout">
                        <div class="total">
                            <div>
                                <div class="Subtotal">Sub-Total</div>
                                <div class="items">
                                    <%= getTotalItems(cartItems) %> items
                                </div>
                            </div>
                            <div class="total-amount">
                                <%= getTotalAmount(cartItems) %>
                            </div>
                        </div>
                        <button class="button">Checkout</button>
                    </div>
        </div>



        <button id="play-button" class="btn btn-link text-decoration-none" style="font-size: 48px; position: absolute; top: 10px; left: 10px;">
            <i class="fas fa-volume-up fa-lg"></i>
          </button>

    
        <script src="/js/chatbot.js"></script>
        <script>
            play_audio('View items in your cart here. Add or remove items and checkout when ready!');
        </script>

    </body>
    <!-- <script src="/js/main.js"></script> -->
    
</html>
